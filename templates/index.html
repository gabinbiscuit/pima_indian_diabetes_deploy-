<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Diabetes Classification</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap-4.1.3-dist/css/bootstrap.min.css')}}">
    <style>.github-corner:hover .octo-arm {
        animation: octocat-wave 560ms ease-in-out
    }

    @keyframes octocat-wave {
        0%, 100% {
            transform: rotate(0)
        }
        20%, 60% {
            transform: rotate(-25deg)
        }
        40%, 80% {
            transform: rotate(10deg)
        }
    }

    @media (max-width: 500px) {
        .github-corner:hover .octo-arm {
            animation: none
        }

        .github-corner .octo-arm {
            animation: octocat-wave 560ms ease-in-out
        }
    }</style>
</head>

<body>
<div class="container-fluid pt-5">
    <div class="row">
        <div class="col-12 text-center">
            <h1>Diabetes Classification</h1>
        </div>
    </div>
    <div class="row pt-4">
        <div class="col-6 pl-5">
            <form action="{{ url_for('predict')}}" method="post" id="form-predict">
                <div class="form-group row col-form-label">
                    <label class="col-4" for="inputPregnancies">Pregnancies</label>
                    <div class="col-8">
                        <input type="number" class="form-control form-control-sm" id="inputPregnancies"
                               name="Pregnancies"
                               placeholder="Pregnancies" step=1 required autofocus/>
                    </div>
                </div>
                <div class="form-group row col-form-label">
                    <label class="col-4" for="inputGlucose">Glucose</label>
                    <div class="col-8">
                        <input type="number" class="form-control form-control-sm" id="inputGlucose" name="Glucose"
                               placeholder="Glucose" step=1 required/>
                    </div>
                </div>
                <div class="form-group row col-form-label">
                    <label class="col-4" for="inputBloodPressure">Blood Pressure</label>
                    <div class="col-8">
                        <input type="number" class="form-control form-control-sm" id="inputBloodPressure"
                               name="BloodPressure"
                               placeholder="Blood pressure" step=1 required/>
                    </div>
                </div>
                <div class="form-group row col-form-label">
                    <label class="col-4" for="inputSkinThickness">Skin Thickness</label>
                    <div class="col-8">
                        <input type="number" class="form-control form-control-sm" id="inputSkinThickness"
                               name="SkinThickness"
                               placeholder="Skin Thickness" step=1 required/>
                    </div>
                </div>
                <div class="form-group row col-form-label">
                    <label class="col-4" for="inputInsulin">Insulin</label>
                    <div class="col-8">
                        <input type="number" class="form-control form-control-sm" id="inputInsulin" name="Insulin"
                               placeholder="Insulin" step=1 required/>
                    </div>
                </div>
                <div class="form-group row col-form-label">
                    <label class="col-4" for="inputBMI">BMI</label>
                    <div class="col-8">
                        <input type="number" class="form-control form-control-sm" id="inputBMI" name="BMI"
                               placeholder="BMI" step=0.01 required/>
                    </div>
                </div>
                <div class="form-group row col-form-label">
                    <label class="col-4" for="inputDiabetesPedigreeFunction">Diabetes Pedigree Function</label>
                    <div class="col-8">
                        <input type="number" class="form-control form-control-sm" id="inputDiabetesPedigreeFunction"
                               name="DiabetesPedigreeFunction"
                               placeholder="Diabetes Pedigree Function" step=0.001 required/>
                    </div>
                </div>
                <div class="form-group row col-form-label">
                    <label class="col-4" for="inputAge">Age</label>
                    <div class="col-8">
                        <input type="number" class="form-control form-control-sm" id="inputAge" name="Age"
                               placeholder="Age" step=1 required/>
                    </div>
                </div>
                <button type="submit" class="btn btn-outline-danger btn-block">Predict</button>
                </br>
            </form>
        </div>
        <div class="col-6 pr-5">
            <div class="mb-3">
                <button class="btn btn-danger" data-toggle="modal" data-target="#howToUseModal">How to Use</button>
                <button class="btn btn-warning" data-toggle="modal" data-target="#howToMakeModal">How to Make</button>
                <button class="btn btn-success" data-toggle="modal" data-target="#howItWorkModal">How it Work</button>
                <button class="btn btn-primary" data-toggle="modal" data-target="#developersModal">BootcampDS11B</button>
            </div>

            <p>
                Diabetes is a disease in which your blood glucose, or blood sugar, levels are too high. Glucose comes
                from the foods you eat. Insulin is a hormone that helps the glucose get into your cells to give them
                energy. With type 1 diabetes, your body does not make insulin. With type 2 diabetes, the more common
                type, your body does not make or use insulin well. Without enough insulin, the glucose stays in your
                blood. You can also have prediabetes. This means that your blood sugar is higher than normal but not
                high enough to be called diabetes. Having prediabetes puts you at a higher risk of getting type 2
                diabetes.
            </p>

            <h5>Features</h5>
            <ul>
                <li><b>Pregnancies</b> Number of times pregnant</li>
                <li><b>Glucose</b> Plasma glucose concentration a 2 hours in an oral glucose tolerance test</li>
                <li><b>Blood Pressure</b> Diastolic blood pressure (mm Hg)</li>
                <li><b>Skin Thickness</b> Triceps skin fold thickness (mm)</li>
                <li><b>Insulin</b> 2-Hour serum insulin (mu U/ml)</li>
                <li><b>BMI</b> Body mass index (weight in kg/(height in m)^2)</li>
                <li><b>Diabetes Pedigree Function</b> Diabetes pedigree function</li>
                <li><b>Age</b> Age (years)</li>
            </ul>
        </div>
    </div>
</div>

<div class="modal fade" id="howToUseModal" tabindex="-1" role="dialog" aria-labelledby="howToUseModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="howToUseModalLabel">How to Use</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <ol>
                    <li>Fill in the form in the application</li>
                    <li>Hit "Predict"</li>
                </ol>
                <button type="button" class="btn btn-danger float-right" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="howToMakeModal" tabindex="-1" role="dialog" aria-labelledby="howToMakeModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="howToMakeModalLabel">How to Make</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <img class="img-fluid mb-3" src="{{ url_for('static', filename='img/how-to-make.jpeg')}}">
                <button type="button" class="btn btn-danger float-right" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="howItWorkModal" tabindex="-1" role="dialog" aria-labelledby="howItWorkModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="howItWorkModalLabel">How it Work</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <img class="img-fluid mb-3" src="{{ url_for('static', filename='img/how-it-work.jpeg')}}">
                <button type="button" class="btn btn-danger float-right" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/jquery-3.4.1.min.js')}}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename='bootstrap-4.1.3-dist/js/bootstrap.min.js')}}"></script>
<script src="{{ url_for('static', filename='sweetalert2-9.4.3/package/dist/sweetalert2.all.min.js')}}"></script>

<script>
    const formPredict = $('#form-predict');

    formPredict.submit((e) => {
        e.preventDefault();
        $.post("{{ url_for('predict')}}", formPredict.serialize(), res => {
            Swal.fire({
                icon: res.prediction_text === "1" ? "error" : "success",
                title: res.prediction_text === "1" ? "Oops..." : "Yass...",
                text: res.prediction_text === "1" ? "You probably have diabetes, Please contact a doctor" : "You're healthy!!",
                showCancelButton: true,
                cancelButtonText: "OK",
                confirmButtonText: "Show Probability",
                reverseButtons: true
            }).then(res_swal => {
                if (res_swal.value) {
                    Swal.fire({
                        title: "Probability",
                        text: res.proba,
                        showCancelButton: true,
                        showConfirmButton: false
                    });
                } else {
                    formPredict.trigger("reset");
                }
            });
        });
    });
</script>
</body>
</html>